#include <WiFi.h>
#include <WiFiClientSecure.h>
#include <UniversalTelegramBot.h>
#include <ArduinoJson.h>

#include <Adafruit_Sensor.h>
#include "DHT.h"

#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

#define SCREEN_WIDTH 128 // OLED display width, in pixels
#define SCREEN_HEIGHT 64 // OLED display height, in pixels
#define OLED_RESET -1
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, -1);

// Wifi network station credentials
#define WIFI_SSID "YOUR_WIFI_SSID"
#define WIFI_PASSWORD "YOUR_WIFI_PASSWORD"
WiFiClientSecure secured_client;

// Telegram BOT Token (Get from Botfather)
#define BOT_TOKEN "YOUR_BOT_TOKEN"
const unsigned long BOT_MTBS = 1000; // mean time between scan messages
UniversalTelegramBot bot(BOT_TOKEN, secured_client);
unsigned long bot_lasttime;          // last time messages' scan has been done
bool Start = false;

#define DHTPIN 2 
#define DHTTYPE DHT11 
DHT dht(DHTPIN, DHTTYPE);

// Template for display
const unsigned char myBitmap [] PROGMEM = {
  0x00, 0x01, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x07, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x0c, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x0c, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x30, 0xe1, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x31, 0xf3, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x71, 0x9f, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x31, 0xff, 0xbc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x30, 0xf7, 0x1c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x70, 0x07, 0x1c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x30, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x08, 0x10, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x18, 0x18, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x10, 0x08, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x30, 0x0c, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x20, 0x04, 0x07, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x20, 0x04, 0x07, 0x1c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x20, 0x04, 0x07, 0x1c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x20, 0x04, 0x07, 0xbc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x30, 0x08, 0x07, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x18, 0x18, 0x03, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x0e, 0x70, 0x01, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x03, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x0f, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x0f, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x1f, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x30, 0x00, 0x1f, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x7c, 0x70, 0x3f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0xfc, 0x70, 0x3f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0xfc, 0xe0, 0x3f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0xfc, 0xe0, 0x3f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0xfd, 0xe0, 0x3f, 0xf2, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0xfd, 0xc0, 0x1f, 0xf7, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0xff, 0xfc, 0x1f, 0xef, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0xff, 0xfe, 0x07, 0x8f, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0xff, 0xfe, 0x00, 0x0f, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0xff, 0xfe, 0x00, 0x1f, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x7f, 0xfe, 0x00, 0x3f, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x3f, 0xfe, 0x00, 0x3f, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x0e, 0xfe, 0x00, 0x7f, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x0e, 0xfe, 0x00, 0x7f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x1e, 0xfe, 0x00, 0x7f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x1c, 0xfe, 0x00, 0x7f, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x1c, 0x7c, 0x00, 0x7f, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x18, 0x3c, 0x00, 0x3f, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x1f, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

// Template for attending the WiFi connection
#define FRAME_DELAY (42)
#define FRAME_WIDTH (48)
#define FRAME_HEIGHT (48)
#define FRAME_COUNT (sizeof(loading) / sizeof(frames[0]))
const byte PROGMEM loading[][288] = {
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,252,0,0,0,0,1,255,0,0,0,0,0,15,224,0,0,0,0,1,240,0,127,240,0,0,124,0,127,248,0,0,30,0,0,248,0,0,15,0,1,248,0,0,3,128,3,184,0,0,1,128,3,184,0,0,1,192,7,56,0,0,0,224,14,56,0,0,0,96,14,56,0,0,0,48,28,56,0,0,0,48,28,24,0,0,0,24,24,0,0,0,0,24,56,0,0,0,0,24,56,0,0,0,0,28,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,56,0,0,0,0,28,24,0,0,0,0,28,24,0,0,0,0,24,24,0,0,0,0,56,12,0,0,0,0,48,12,0,0,0,0,112,6,0,0,0,0,112,7,0,0,0,0,224,3,128,0,0,1,192,1,128,0,0,1,192,1,192,0,0,3,128,0,240,0,0,15,0,0,120,0,0,30,0,0,62,0,0,56,0,0,15,128,0,240,0,0,7,240,15,192,0,0,0,255,255,0,0,0,0,63,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,252,0,0,0,0,1,255,0,0,0,0,0,15,224,0,0,0,0,1,240,0,127,240,0,0,124,0,127,248,0,0,30,0,0,248,0,0,15,0,1,248,0,0,3,128,3,184,0,0,1,128,3,184,0,0,1,192,7,56,0,0,0,224,14,56,0,0,0,96,14,56,0,0,0,48,28,56,0,0,0,48,28,24,0,0,0,24,24,0,0,0,0,24,56,0,0,0,0,24,56,0,0,0,0,28,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,56,0,0,0,0,28,24,0,0,0,0,28,24,0,0,0,0,24,24,0,0,0,0,56,12,0,0,0,0,48,12,0,0,0,0,112,6,0,0,0,0,112,7,0,0,0,0,224,3,128,0,0,1,192,1,128,0,0,1,192,1,192,0,0,3,128,0,240,0,0,15,0,0,120,0,0,30,0,0,62,0,0,56,0,0,15,128,0,240,0,0,7,240,15,192,0,0,0,255,255,0,0,0,0,63,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,252,0,0,0,0,1,255,0,0,0,0,0,15,224,0,0,0,0,1,240,0,127,240,0,0,124,0,127,248,0,0,30,0,0,248,0,0,15,0,1,248,0,0,3,128,3,184,0,0,1,128,3,184,0,0,1,192,7,56,0,0,0,224,14,56,0,0,0,96,14,56,0,0,0,48,28,56,0,0,0,48,28,24,0,0,0,24,24,0,0,0,0,24,56,0,0,0,0,24,56,0,0,0,0,28,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,56,0,0,0,0,28,24,0,0,0,0,28,24,0,0,0,0,24,24,0,0,0,0,56,12,0,0,0,0,48,12,0,0,0,0,112,6,0,0,0,0,112,7,0,0,0,0,224,3,128,0,0,1,192,1,128,0,0,1,192,1,192,0,0,3,128,0,240,0,0,15,0,0,120,0,0,30,0,0,62,0,0,56,0,0,15,128,0,240,0,0,7,240,15,192,0,0,0,255,255,0,0,0,0,63,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,252,0,0,0,0,1,255,128,0,0,0,0,15,224,0,0,0,0,1,240,0,127,240,0,0,124,0,127,248,0,0,30,0,0,248,0,0,15,0,1,248,0,0,3,128,3,248,0,0,1,192,3,184,0,0,0,192,7,56,0,0,0,224,14,56,0,0,0,96,14,56,0,0,0,48,28,56,0,0,0,48,28,24,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,56,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,24,0,0,0,0,28,24,0,0,0,0,28,24,0,0,0,0,24,24,0,0,0,0,56,12,0,0,0,0,56,14,0,0,0,0,112,6,0,0,0,0,112,7,0,0,0,0,224,3,0,0,0,1,192,3,128,0,0,1,192,1,192,0,0,3,128,0,240,0,0,7,0,0,120,0,0,30,0,0,62,0,0,60,0,0,15,128,0,240,0,0,7,240,7,192,0,0,1,255,255,0,0,0,0,63,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,252,0,0,0,127,193,255,128,0,0,127,192,15,224,0,0,15,192,1,240,0,0,63,128,0,124,0,0,127,0,0,30,0,0,254,0,0,15,0,1,206,0,0,3,128,3,140,0,0,1,192,3,128,0,0,0,192,7,0,0,0,0,224,14,0,0,0,0,96,14,0,0,0,0,48,28,0,0,0,0,48,28,0,0,0,0,24,24,0,0,0,0,24,24,0,0,0,0,24,56,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,24,0,0,0,0,28,24,0,0,0,0,28,24,0,0,0,0,24,24,0,0,0,0,56,12,0,0,0,0,56,12,0,0,0,0,112,6,0,0,0,0,112,7,0,0,0,0,224,3,0,0,0,1,192,3,128,0,0,1,192,1,192,0,0,3,128,0,240,0,0,7,0,0,120,0,0,30,0,0,62,0,0,60,0,0,15,128,0,240,0,0,7,240,7,192,0,0,1,255,255,0,0,0,0,63,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,31,252,0,0,0,0,255,255,128,0,0,3,240,15,224,0,0,15,0,1,240,0,0,28,0,0,124,0,0,120,0,0,30,0,0,240,0,0,15,0,1,192,0,0,3,128,3,128,0,0,1,192,3,128,0,0,0,192,7,0,0,0,0,224,14,0,0,0,0,96,14,0,0,0,0,48,12,0,0,0,0,48,28,0,0,0,0,24,24,0,0,0,0,24,56,0,0,0,0,24,56,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,28,24,0,0,0,0,28,24,0,0,0,0,24,24,0,0,0,0,56,12,0,0,0,0,56,12,0,0,0,0,112,6,0,0,0,0,112,7,0,0,0,0,224,3,0,0,0,1,192,3,128,0,0,1,192,1,192,0,0,3,128,0,240,0,0,7,0,0,120,0,0,30,0,0,62,0,0,60,0,0,15,128,0,240,0,0,7,240,7,192,0,0,1,255,255,0,0,0,0,63,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,127,255,224,0,0,0,255,255,240,0,0,3,128,0,48,0,0,7,0,0,16,0,0,14,0,0,24,0,0,12,0,0,24,0,0,12,0,0,8,0,0,12,0,0,12,0,0,12,0,0,12,0,0,12,0,0,12,0,0,12,0,0,12,0,0,4,0,0,12,0,0,14,0,0,12,0,0,12,0,0,28,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,56,0,0,48,0,0,48,0,0,112,0,0,48,0,0,224,0,0,48,0,1,192,0,0,48,0,1,128,0,0,48,0,0,128,0,0,16,0,1,128,0,0,24,0,1,128,0,0,24,0,3,128,0,0,12,0,7,0,0,0,12,0,6,0,0,0,6,0,126,0,0,0,6,7,248,0,0,0,3,255,0,0,0,0,3,240,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,112,0,0,0,0,0,248,0,0,0,0,1,204,0,0,0,0,3,134,0,0,0,0,7,3,0,0,0,0,6,1,128,0,0,0,12,0,192,0,0,0,12,0,96,0,0,0,12,0,48,0,0,0,12,0,24,0,0,0,12,0,12,0,0,0,12,0,6,0,0,0,12,0,3,0,0,7,252,0,1,128,0,15,254,0,1,128,0,56,12,0,3,128,0,112,0,0,7,0,0,224,0,0,14,0,1,192,0,48,28,0,1,128,0,127,240,0,1,128,0,63,224,0,0,192,0,48,0,0,0,96,0,48,0,0,0,48,0,48,0,0,0,24,0,48,0,0,0,12,0,48,0,0,0,6,0,48,0,0,0,3,0,48,0,0,0,1,128,96,0,0,0,0,192,224,0,0,0,0,97,192,0,0,0,0,51,128,0,0,0,0,31,0,0,0,0,0,14,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,240,0,0,0,0,0,255,0,0,0,0,0,207,224,0,0,0,1,205,248,0,0,0,1,140,60,0,0,0,3,156,14,0,0,0,3,24,7,0,0,0,3,56,3,0,0,0,7,48,1,128,0,0,6,112,1,128,0,0,14,96,0,129,252,0,12,96,0,207,255,128,12,224,0,220,7,224,28,192,0,248,0,240,25,192,0,224,0,124,57,128,0,64,0,110,49,128,0,0,0,230,51,128,0,0,0,206,115,0,0,0,1,204,103,0,0,0,1,140,118,0,2,0,1,156,62,0,7,0,3,152,15,0,31,0,3,56,7,224,59,0,7,48,1,255,243,0,6,48,0,63,129,0,6,112,0,0,1,128,14,96,0,0,1,128,12,224,0,0,0,192,28,192,0,0,0,224,24,192,0,0,0,112,57,192,0,0,0,60,49,128,0,0,0,31,179,128,0,0,0,7,243,0,0,0,0,0,255,0,0,0,0,0,15,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,255,255,255,255,0,0,255,255,255,255,0,0,192,0,0,3,0,0,192,0,0,3,0,0,224,0,0,3,0,0,127,255,255,255,0,0,63,255,255,252,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,24,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,28,0,0,56,0,0,14,0,0,112,0,0,7,0,0,240,0,0,7,128,1,224,0,0,3,224,3,192,0,0,0,240,15,0,0,0,0,120,30,0,0,0,0,120,30,0,0,0,0,240,15,0,0,0,3,192,7,192,0,0,7,128,1,224,0,0,15,0,0,224,0,0,14,0,0,112,0,0,28,0,0,56,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,24,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,63,255,255,252,0,0,255,255,255,254,0,0,192,0,0,7,0,0,192,0,0,3,0,0,192,0,0,3,0,0,255,255,255,255,0,0,255,255,255,255,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,7,255,255,255,255,224,7,255,255,255,255,224,6,0,0,0,0,96,6,0,0,0,0,96,7,0,0,0,0,96,3,255,255,255,255,224,1,255,255,255,255,128,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,24,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,28,0,0,56,0,0,14,0,0,112,0,0,7,0,0,240,0,0,7,128,1,224,0,0,3,224,3,192,0,0,0,240,15,0,0,0,0,120,30,0,0,0,0,120,30,0,0,0,0,240,15,0,0,0,3,192,7,192,0,0,7,128,1,224,0,0,15,0,0,224,0,0,14,0,0,112,0,0,28,0,0,56,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,24,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,1,255,255,255,255,128,7,255,255,255,255,192,6,0,0,0,0,224,6,0,0,0,0,96,6,0,0,0,0,96,7,255,255,255,255,224,7,255,255,255,255,224,0,0,0,0,0,0},
  {0,0,0,0,0,0,3,255,255,255,255,192,3,255,255,255,255,192,3,0,0,0,0,192,3,0,0,0,0,192,3,128,0,0,0,192,3,255,255,255,255,192,0,255,255,255,255,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,24,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,28,0,0,56,0,0,14,0,0,112,0,0,7,0,0,240,0,0,7,128,1,224,0,0,3,224,3,192,0,0,0,240,15,0,0,0,0,120,30,0,0,0,0,120,30,0,0,0,0,240,15,0,0,0,3,192,7,192,0,0,7,128,1,224,0,0,15,0,0,224,0,0,14,0,0,112,0,0,28,0,0,56,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,24,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,255,255,255,255,0,3,255,255,255,255,192,3,0,0,0,1,192,3,0,0,0,0,192,3,0,0,0,0,192,3,255,255,255,255,192,3,255,255,255,255,192,0,0,0,0,0,0},
  {0,0,0,0,0,0,3,255,255,255,255,192,3,255,255,255,255,192,3,0,0,0,0,192,3,0,0,0,0,192,3,128,0,0,0,192,3,255,255,255,255,192,0,255,255,255,255,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,24,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,28,0,0,56,0,0,14,0,0,112,0,0,7,0,0,240,0,0,7,128,1,224,0,0,3,224,3,192,0,0,0,240,15,0,0,0,0,120,30,0,0,0,0,120,30,0,0,0,0,240,15,0,0,0,3,192,7,192,0,0,7,128,1,224,0,0,15,0,0,224,0,0,14,0,0,112,0,0,28,0,0,56,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,24,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,255,255,255,255,0,3,255,255,255,255,192,3,0,0,0,1,192,3,0,0,0,0,192,3,0,0,0,0,192,3,255,255,255,255,192,3,255,255,255,255,192,0,0,0,0,0,0},
  {0,0,0,0,0,0,3,255,255,255,255,192,3,255,255,255,255,192,3,0,0,0,0,192,3,0,0,0,0,192,3,128,0,0,0,192,3,255,255,255,255,192,0,255,255,255,255,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,24,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,28,0,0,56,0,0,14,0,0,112,0,0,7,0,0,240,0,0,7,128,1,224,0,0,3,224,3,192,0,0,0,240,15,0,0,0,0,120,30,0,0,0,0,120,30,0,0,0,0,240,15,0,0,0,3,192,7,192,0,0,7,128,1,224,0,0,15,0,0,224,0,0,14,0,0,112,0,0,28,0,0,56,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,24,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,255,255,255,255,0,3,255,255,255,255,192,3,0,0,0,1,192,3,0,0,0,0,192,3,0,0,0,0,192,3,255,255,255,255,192,3,255,255,255,255,192,0,0,0,0,0,0},
  {0,0,0,0,0,0,3,255,255,255,255,192,3,255,255,255,255,192,3,0,0,0,0,192,3,0,0,0,0,192,3,128,0,0,0,192,3,255,255,255,255,192,0,255,255,255,255,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,24,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,28,0,0,56,0,0,14,0,0,112,0,0,7,0,0,240,0,0,7,128,1,224,0,0,3,224,3,192,0,0,0,240,15,0,0,0,0,120,30,0,0,0,0,120,30,0,0,0,0,240,15,0,0,0,3,192,7,192,0,0,7,128,1,224,0,0,15,0,0,224,0,0,14,0,0,112,0,0,28,0,0,56,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,24,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,255,255,255,255,0,3,255,255,255,255,192,3,0,0,0,1,192,3,0,0,0,0,192,3,0,0,0,0,192,3,255,255,255,255,192,3,255,255,255,255,192,0,0,0,0,0,0},
  {0,0,0,0,0,0,3,255,255,255,255,192,3,255,255,255,255,192,3,0,0,0,0,192,3,0,0,0,0,192,3,128,0,0,0,192,3,255,255,255,255,192,0,255,255,255,255,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,24,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,28,0,0,56,0,0,14,0,0,112,0,0,7,0,0,240,0,0,7,128,1,224,0,0,3,224,3,192,0,0,0,240,15,0,0,0,0,120,30,0,0,0,0,120,30,0,0,0,0,240,15,0,0,0,3,192,7,192,0,0,7,128,1,224,0,0,15,0,0,224,0,0,14,0,0,112,0,0,28,0,0,56,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,24,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,255,255,255,255,0,3,255,255,255,255,192,3,0,0,0,1,192,3,0,0,0,0,192,3,0,0,0,0,192,3,255,255,255,255,192,3,255,255,255,255,192,0,0,0,0,0,0},
  {0,0,0,0,0,0,3,255,255,255,255,192,3,255,255,255,255,192,3,0,0,0,0,192,3,0,0,0,0,192,3,128,0,0,0,192,3,255,255,255,255,192,0,255,255,255,255,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,24,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,28,0,0,56,0,0,14,0,0,112,0,0,7,0,0,240,0,0,7,128,1,224,0,0,3,224,3,192,0,0,0,240,15,0,0,0,0,120,30,0,0,0,0,120,30,0,0,0,0,240,15,0,0,0,3,192,7,192,0,0,7,128,1,224,0,0,15,0,0,224,0,0,14,0,0,112,0,0,28,0,0,56,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,24,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,255,255,255,255,0,3,255,255,255,255,192,3,0,0,0,1,192,3,0,0,0,0,192,3,0,0,0,0,192,3,255,255,255,255,192,3,255,255,255,255,192,0,0,0,0,0,0},
  {0,0,0,0,0,0,3,255,255,255,255,192,3,255,255,255,255,192,3,0,0,0,0,192,3,0,0,0,0,192,3,128,0,0,0,192,3,255,255,255,255,192,0,255,255,255,255,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,24,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,28,0,0,56,0,0,14,0,0,112,0,0,7,0,0,240,0,0,7,128,1,224,0,0,3,224,3,192,0,0,0,240,15,0,0,0,0,120,30,0,0,0,0,120,30,0,0,0,0,240,15,0,0,0,3,192,7,192,0,0,7,128,1,224,0,0,15,0,0,224,0,0,14,0,0,112,0,0,28,0,0,56,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,24,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,255,255,255,255,0,3,255,255,255,255,192,3,0,0,0,1,192,3,0,0,0,0,192,3,0,0,0,0,192,3,255,255,255,255,192,3,255,255,255,255,192,0,0,0,0,0,0},
  {0,0,0,0,0,0,7,255,255,255,255,224,7,255,255,255,255,224,6,0,0,0,0,96,6,0,0,0,0,96,7,0,0,0,0,96,3,255,255,255,255,224,1,255,255,255,255,128,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,24,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,28,0,0,56,0,0,14,0,0,112,0,0,7,0,0,240,0,0,7,128,1,224,0,0,3,224,3,192,0,0,0,240,15,0,0,0,0,120,30,0,0,0,0,120,30,0,0,0,0,240,15,0,0,0,3,192,7,192,0,0,7,128,1,224,0,0,15,0,0,224,0,0,14,0,0,112,0,0,28,0,0,56,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,24,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,1,255,255,255,255,128,7,255,255,255,255,192,6,0,0,0,0,224,6,0,0,0,0,96,6,0,0,0,0,96,7,255,255,255,255,224,7,255,255,255,255,224,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,255,255,255,255,0,0,255,255,255,255,0,0,192,0,0,3,0,0,192,0,0,3,0,0,224,0,0,3,0,0,127,255,255,255,0,0,63,255,255,252,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,24,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,28,0,0,56,0,0,14,0,0,112,0,0,7,0,0,240,0,0,7,128,1,224,0,0,3,224,3,192,0,0,0,240,15,0,0,0,0,120,30,0,0,0,0,120,30,0,0,0,0,240,15,0,0,0,3,192,7,192,0,0,7,128,1,224,0,0,15,0,0,224,0,0,14,0,0,112,0,0,28,0,0,56,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,24,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,56,0,0,28,0,0,63,255,255,252,0,0,255,255,255,254,0,0,192,0,0,7,0,0,192,0,0,3,0,0,192,0,0,3,0,0,255,255,255,255,0,0,255,255,255,255,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,240,0,0,0,0,0,255,0,0,0,0,0,207,224,0,0,0,1,205,248,0,0,0,1,140,60,0,0,0,3,156,14,0,0,0,3,24,7,0,0,0,3,56,3,0,0,0,7,48,1,128,0,0,6,112,1,128,0,0,14,96,0,129,252,0,12,96,0,207,255,128,12,224,0,220,7,224,28,192,0,248,0,240,25,192,0,224,0,124,57,128,0,64,0,110,49,128,0,0,0,230,51,128,0,0,0,206,115,0,0,0,1,204,103,0,0,0,1,140,118,0,2,0,1,156,62,0,7,0,3,152,15,0,31,0,3,56,7,224,59,0,7,48,1,255,243,0,6,48,0,63,129,0,6,112,0,0,1,128,14,96,0,0,1,128,12,224,0,0,0,192,28,192,0,0,0,224,24,192,0,0,0,112,57,192,0,0,0,60,49,128,0,0,0,31,179,128,0,0,0,7,243,0,0,0,0,0,255,0,0,0,0,0,15,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,112,0,0,0,0,0,248,0,0,0,0,1,204,0,0,0,0,3,134,0,0,0,0,7,3,0,0,0,0,6,1,128,0,0,0,12,0,192,0,0,0,12,0,96,0,0,0,12,0,48,0,0,0,12,0,24,0,0,0,12,0,12,0,0,0,12,0,6,0,0,0,12,0,3,0,0,7,252,0,1,128,0,15,254,0,1,128,0,56,12,0,3,128,0,112,0,0,7,0,0,224,0,0,14,0,1,192,0,48,28,0,1,128,0,127,240,0,1,128,0,63,224,0,0,192,0,48,0,0,0,96,0,48,0,0,0,48,0,48,0,0,0,24,0,48,0,0,0,12,0,48,0,0,0,6,0,48,0,0,0,3,0,48,0,0,0,1,128,96,0,0,0,0,192,224,0,0,0,0,97,192,0,0,0,0,51,128,0,0,0,0,31,0,0,0,0,0,14,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,127,255,224,0,0,0,255,255,240,0,0,3,128,0,48,0,0,7,0,0,16,0,0,14,0,0,24,0,0,12,0,0,24,0,0,12,0,0,8,0,0,12,0,0,12,0,0,12,0,0,12,0,0,12,0,0,12,0,0,12,0,0,12,0,0,4,0,0,12,0,0,14,0,0,12,0,0,12,0,0,28,0,0,28,0,0,24,0,0,24,0,0,24,0,0,24,0,0,56,0,0,56,0,0,48,0,0,48,0,0,112,0,0,48,0,0,224,0,0,48,0,1,192,0,0,48,0,1,128,0,0,48,0,0,128,0,0,16,0,1,128,0,0,24,0,1,128,0,0,24,0,3,128,0,0,12,0,7,0,0,0,12,0,6,0,0,0,6,0,126,0,0,0,6,7,248,0,0,0,3,255,0,0,0,0,3,240,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,31,252,0,0,0,0,255,255,128,0,0,3,240,15,224,0,0,15,0,1,240,0,0,28,0,0,124,0,0,120,0,0,30,0,0,240,0,0,15,0,1,192,0,0,3,128,3,128,0,0,1,192,3,128,0,0,0,192,7,0,0,0,0,224,14,0,0,0,0,96,14,0,0,0,0,48,12,0,0,0,0,48,28,0,0,0,0,24,24,0,0,0,0,24,56,0,0,0,0,24,56,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,28,24,0,0,0,0,28,24,0,0,0,0,24,24,0,0,0,0,56,12,0,0,0,0,56,12,0,0,0,0,112,6,0,0,0,0,112,7,0,0,0,0,224,3,0,0,0,1,192,3,128,0,0,1,192,1,192,0,0,3,128,0,240,0,0,7,0,0,120,0,0,30,0,0,62,0,0,60,0,0,15,128,0,240,0,0,7,240,7,192,0,0,1,255,255,0,0,0,0,63,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252,0,0,0,127,192,255,128,0,0,127,192,15,224,0,0,15,192,1,240,0,0,63,128,0,124,0,0,127,0,0,30,0,0,254,0,0,7,0,1,206,0,0,3,128,3,140,0,0,1,192,3,128,0,0,0,192,7,0,0,0,0,224,14,0,0,0,0,96,14,0,0,0,0,48,12,0,0,0,0,48,28,0,0,0,0,24,24,0,0,0,0,24,56,0,0,0,0,24,56,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,24,0,0,0,0,28,24,0,0,0,0,28,24,0,0,0,0,24,24,0,0,0,0,56,12,0,0,0,0,56,12,0,0,0,0,112,6,0,0,0,0,112,7,0,0,0,0,224,3,0,0,0,0,192,3,128,0,0,1,192,1,192,0,0,3,128,0,224,0,0,7,0,0,120,0,0,30,0,0,62,0,0,60,0,0,15,128,0,240,0,0,7,240,7,192,0,0,1,255,255,0,0,0,0,63,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,252,0,0,0,0,1,255,0,0,0,0,0,15,224,0,0,0,0,1,240,0,127,240,0,0,124,0,127,248,0,0,30,0,0,248,0,0,15,0,1,248,0,0,3,128,3,184,0,0,1,128,3,184,0,0,1,192,7,56,0,0,0,224,14,56,0,0,0,96,14,56,0,0,0,48,28,56,0,0,0,48,28,24,0,0,0,24,24,0,0,0,0,24,56,0,0,0,0,24,56,0,0,0,0,28,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,56,0,0,0,0,28,24,0,0,0,0,28,24,0,0,0,0,24,24,0,0,0,0,56,12,0,0,0,0,48,12,0,0,0,0,112,6,0,0,0,0,112,7,0,0,0,0,224,3,128,0,0,1,192,1,128,0,0,1,192,1,192,0,0,3,128,0,240,0,0,15,0,0,120,0,0,30,0,0,62,0,0,56,0,0,15,128,0,240,0,0,7,240,15,192,0,0,0,255,255,0,0,0,0,63,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,252,0,0,0,0,1,255,0,0,0,0,0,15,224,0,0,0,0,1,240,0,127,240,0,0,124,0,127,248,0,0,30,0,0,248,0,0,15,0,1,248,0,0,3,128,3,184,0,0,1,128,3,184,0,0,1,192,7,56,0,0,0,224,14,56,0,0,0,96,14,56,0,0,0,48,28,56,0,0,0,48,28,24,0,0,0,24,24,0,0,0,0,24,56,0,0,0,0,24,56,0,0,0,0,28,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,56,0,0,0,0,28,24,0,0,0,0,28,24,0,0,0,0,24,24,0,0,0,0,56,12,0,0,0,0,48,12,0,0,0,0,112,6,0,0,0,0,112,7,0,0,0,0,224,3,128,0,0,1,192,1,128,0,0,1,192,1,192,0,0,3,128,0,240,0,0,15,0,0,120,0,0,30,0,0,62,0,0,56,0,0,15,128,0,240,0,0,7,240,15,192,0,0,0,255,255,0,0,0,0,63,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,252,0,0,0,0,1,255,0,0,0,0,0,15,224,0,0,0,0,1,240,0,127,240,0,0,124,0,127,248,0,0,30,0,0,248,0,0,15,0,1,248,0,0,3,128,3,184,0,0,1,128,3,184,0,0,1,192,7,56,0,0,0,224,14,56,0,0,0,96,14,56,0,0,0,48,28,56,0,0,0,48,28,24,0,0,0,24,24,0,0,0,0,24,56,0,0,0,0,24,56,0,0,0,0,28,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,48,0,0,0,0,12,56,0,0,0,0,28,24,0,0,0,0,28,24,0,0,0,0,24,24,0,0,0,0,56,12,0,0,0,0,48,12,0,0,0,0,112,6,0,0,0,0,112,7,0,0,0,0,224,3,128,0,0,1,192,1,128,0,0,1,192,1,192,0,0,3,128,0,240,0,0,15,0,0,120,0,0,30,0,0,62,0,0,56,0,0,15,128,0,240,0,0,7,240,15,192,0,0,0,255,255,0,0,0,0,63,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
};


void handleNewMessages(int numNewMessages)
{
  Serial.println("handleNewMessages");
  Serial.println(String(numNewMessages));

  for (int i = 0; i < numNewMessages; i++)
  {
    String chat_id = bot.messages[i].chat_id;
    String text = bot.messages[i].text;

    String from_name = bot.messages[i].from_name;
    if (from_name == "")
      from_name = "Guest";

    if (text == "/state") {
      float t = dht.readTemperature();
      float h = dht.readHumidity();
      if (isnan(h) || isnan(t)) {
        bot.sendMessage(chat_id, "Failed to read from DHT sensor!");
      } else {
          char message[100]; // Buffer per contenere la stringa formattata
          snprintf(message, sizeof(message), "🌡️: %.2f°C\n💧: %.2f%%", t, h);
    
          bot.sendMessage(chat_id, message);
        }
    }

    if (text == "/start")
    {
      String welcome = "Welcome, " + from_name + ".\n";
      welcome += "Usa questo comando per controllare temperatura e umidità\n\n";
      welcome += "/state stamperà temperatura e umidità\n";
      bot.sendMessage(chat_id, welcome);
    }
  }
}

void setup()
{
  Serial.begin(115200);
  Serial.println();

  dht.begin();

  display.begin(SSD1306_SWITCHCAPVCC, 0x3C);
  delay(2000);
  display.clearDisplay();
  display.setTextColor(WHITE);
  display.drawBitmap(40, 8, loading[0], FRAME_WIDTH, FRAME_HEIGHT, 1);
  display.display();

  // attempt to connect to Wifi network:
  Serial.print("Connecting to Wifi SSID ");
  Serial.print(WIFI_SSID);
  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);
  secured_client.setCACert(TELEGRAM_CERTIFICATE_ROOT); // Add root certificate for api.telegram.org
  while (WiFi.status() != WL_CONNECTED)
  {
    Serial.print(".");
    delay(500);
  }
  Serial.print("\nWiFi connected. IP address: ");
  Serial.println(WiFi.localIP());

  Serial.print("Retrieving time: ");
  configTime(0, 0, "pool.ntp.org"); // get UTC time via NTP
  time_t now = time(nullptr);
  while (now < 24 * 3600)
  {
    Serial.print(".");
    delay(100);
    now = time(nullptr);
  }
  Serial.println(now);
}

void loop()
{
  float t = dht.readTemperature();
  float h = dht.readHumidity();
  if (isnan(h) || isnan(t)) {
    Serial.println("Failed to read from DHT sensor!");
  }
 
  //clear display
  display.clearDisplay();
 
  // display temperature
  display.setTextSize(1);
  display.setCursor(60,0);
  display.print("Temperature ");
  display.setTextSize(2);
  display.setCursor(60,10);
  display.print(t);
  
  // display humidity
  display.setTextSize(1);
  display.setCursor(60, 35);
  display.print("Humidity ");
  display.setTextSize(2);
  display.setCursor(60, 45);
  display.print(h);
  
  display.drawBitmap(0, 0, myBitmap, 128, 64, WHITE);
  display.display(); 
     
  if (millis() - bot_lasttime > BOT_MTBS)
  {
    int numNewMessages = bot.getUpdates(bot.last_message_received + 1);

    while (numNewMessages)
    {
      Serial.println("got response");
      handleNewMessages(numNewMessages);
      numNewMessages = bot.getUpdates(bot.last_message_received + 1);
    }

    bot_lasttime = millis();
  }
}
